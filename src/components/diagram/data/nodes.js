import { ownerColors, getNodeFill, getPrimaryColor } from './ownerConfig';

export const NODE_OFFSET_X = -100;
export const NODE_OFFSET_Y = -40;

const nodeData = [
  {
    id: 'config-matrix',
    label: 'Configuration Matrix',
    subtitle: 'Single Source of Truth',
    x: 200,
    y: 580,
    owners: ['Engineering'],
    questions: [
      'What sub-assemblies and parts make up each finger?',
      'How many units of each are allocated to a specific system?',
    ],
    details: {
      disciplines: ['Systems (SE)', 'Mechanical (ME)', 'Electrical (EE)', 'Program (PM)'],
      capacity: 'Up to 100 fingers per matrix',
      structure: 'Tabs per discipline • Rows = parts/sub-assy • Columns = systems',
      role: 'Engineers allocate ship-level sub-assemblies and parts to define shippable products',
    },
    icon: 'grid',
  },
  {
    id: 'pm-top-level',
    label: 'PM Top Level',
    subtitle: 'System Definitions',
    x: 200,
    y: 120,
    owners: ['Project Management'],
    questions: [
      'What is the site job code?',
      'What is the system code?',
      'What is the finger unique ID?',
      'Where does it ship to?',
      'When is installation scheduled?',
      'What is the install start change history?',
    ],
    details: {
      content: ['System Code', 'Ship-to Address', 'Installation Date'],
      role: 'High-level definition of each system in the program',
    },
    icon: 'doc',
  },
  {
    id: 'config-driver',
    label: 'Config Driver',
    subtitle: 'Ship-level Aggregation',
    x: 500,
    y: 230,
    owners: ['Engineering'],
    questions: [
      'How many of each are needed for the program?',
      'What does the agregated discipline BOMs look like?',
    ],
    details: {
      source: 'Extracts from Configuration Matrix',
      structure: 'Tab per discipline (SE, ME, EE, PM)',
      content: 'Ship-level sub-assemblies and parts, aggregated',
      process: 'Flattens multi-tab discipline structure into single output or broken down by discipline',
      role: 'Transforms matrix format into usable data for downstream consumption',
    },
    icon: 'transform',
  },
  {
    id: 'config-bom-se',
    label: 'Config BOM - SE',
    subtitle: 'Systems Engineering',
    x: 800,
    y: 140,
    owners: ['Engineering'],
    questions: [
      'What SE parts/sub-assy are needed for the program?',
      'What are the SE quantities for the program?',
    ],
    details: {
      discipline: 'Systems Engineering (SE)',
      source: 'Manual copy/paste from Config Driver',
      scope: 'Project-specific SE configuration',
    },
    icon: 'bom',
  },
  {
    id: 'config-bom-me',
    label: 'Config BOM - ME',
    subtitle: 'Mechanical Engineering',
    x: 800,
    y: 230,
    owners: ['Engineering'],
    questions: [
      'What ME parts/sub-assy are needed for the program?',
      'What are the ME quantities for the program?',
    ],
    details: {
      discipline: 'Mechanical Engineering (ME)',
      source: 'Manual copy/paste from Config Driver',
      scope: 'Project-specific ME configuration',
    },
    icon: 'bom',
  },
  {
    id: 'config-bom-ee',
    label: 'Config BOM - EE',
    subtitle: 'Electrical Engineering',
    x: 800,
    y: 320,
    owners: ['Engineering'],
    questions: [
      'What EE parts/sub-assy are needed for the program?',
      'What are the EE quantities for the program?',
    ],
    details: {
      discipline: 'Electrical Engineering (EE)',
      source: 'Manual copy/paste from Config Driver',
      scope: 'Project-specific EE configuration',
    },
    icon: 'bom',
  },
  {
    id: 'config-bom-pm',
    label: 'Config BOM - DOCS',
    subtitle: 'Program Management',
    x: 800,
    y: 410,
    owners: ['Engineering'],
    questions: [
      'What PM parts/sub-assy are needed for the program?',
      'What are the PM quantities for the program?',
    ],
    details: {
      discipline: 'Program Management (PM)',
      source: 'Manual copy/paste from Config Driver',
      scope: 'Project-specific PM configuration',
    },
    icon: 'bom',
  },
  {
    id: 'master-bom',
    label: 'Program Master BOM',
    subtitle: 'Unified Reference',
    x: 1100,
    y: 275,
    owners: ['Engineering'],
    questions: [
      'What are all the discipline BOMs for this program?',
      'What part number / revision reference each discipline BOM?',
      'What is the complete program structure?',
    ],
    details: {
      structure: 'Same format as discipline BOMs',
      content: 'References to discipline BOMs by part number and revision',
      role: 'Unified view linking all 4 discipline configurations',
      note: 'Contains references, not actual components',
    },
    icon: 'master',
  },
  {
    id: 'irp',
    label: 'IRP',
    subtitle: 'Impact Resource Planner',
    x: 1400,
    y: 400,
    owners: ['Project Management', 'Material Management', 'Procurement'],
    questions: [
      'What is the full nested BOM for the program?',
      "What needs to be purchased, made or CFE'd?",
      'What does the flat BOM look like for procurement?',
      'Did we buy everything?',
      'Did we receive everything?',
      'What is the vendor for this item and can it be substitued?',
      'How much did we spend with vendor X?',
    ],
    details: {
      technology: 'VBA-powered Excel workbook',
      function: 'Material Requirements Planning (MRP)',
      process: 'Recursively traverses DOC-IA SharePoint server',
      startPoint: 'Program Master BOM',
      internalOutput: 'Flat BOM - aggregated at part level for procurement',
      feedback: 'Receives pricing, receiving status, PR numbers, qty bought from Master Proc Tracker',
      diffReqs: 'Can regenerate diff reqs to reconcile counts',
      role: 'Core MRP engine - compiles full material requirements',
    },
    icon: 'engine',
  },
  {
    id: 'purchase-reqs',
    label: 'Purchase Requisitions',
    subtitle: 'Per-Vendor PRs',
    x: 1400,
    y: 275,
    owners: ['Project Management'],
    questions: [
      'What needs to be ordered from this vendor?',
      'What are the part details for procurement?',
      'What is the pricing, delivery and need-by date?',
    ],
    details: {
      format: 'Excel workbook (1 per vendor)',
      generation: 'Auto-generated by IRP via VBA',
      preFilled: ['Vendor', 'Project Code (Bulk Order)', 'Part Number', 'Revision', 'Description', 'UoM'],
      manualEntry: ['Pricing', 'Need By Date', 'Ship To Address', 'Cost'],
      role: 'Procurement documents for vendor ordering',
    },
    icon: 'purchase',
  },
  {
    id: 'master-proc-tracker',
    label: 'Master Proc Tracker',
    subtitle: 'Consolidated PR View',
    x: 1700,
    y: 275,
    owners: ['Procurement'],
    questions: [
      'What is the status of all PRs?',
      'What has been ordered across all vendors?',
      'What is the consolidated procurement picture?',
    ],
    details: {
      format: 'Excel workbook',
      source: 'Reads all applicable PRs from DOC-IA via Power Query recursion',
      output: 'Single unified table of all procurement data',
      role: 'Centralized visibility into all purchase requisitions',
    },
    icon: 'tracker',
  },
  {
    id: 'master-receiving',
    label: 'Master Receiving List',
    subtitle: 'Receiving Team Interface',
    x: 1700,
    y: 400,
    owners: ['Ops'],
    questions: [
      'What items are expected to be received and when?',
      'What has been received and when?',
      'Where was each item received to?',
      'When was the inbound QC Check performed?',
    ],
    details: {
      format: 'Excel workbook',
      source: 'Power Query from Master Proc Tracker',
      input: 'Exposes PRs for receiving team to receive against',
      output: 'Quantities received, dates, locations',
      relationship: 'Bi-directional with Master Proc Tracker',
      role: 'Receiving team records receipt of purchased materials',
    },
    icon: 'receiving',
  },
  {
    id: 'procurement',
    label: 'Procurement',
    subtitle: 'Purchasing Team',
    x: 1400,
    y: 150,
    owners: ['Procurement'],
    questions: [
    ],
    details: {
      receives: 'PR + Quote via email',
      role: 'Processes purchase requisitions and acknowledgements',
      action: 'Places orders with vendors',
    },
    icon: 'team',
  },
  {
    id: 'acumatica',
    label: 'Acumatica',
    subtitle: 'ERP System',
    x: 1400,
    y: 25,
    owners: ['Procurement'],
    questions: [
      'What is the financial status of orders?',
      'What are the official purchase orders?',
      'What is the accounting record?',
    ],
    details: {
      type: 'Enterprise Resource Planning (ERP)',
      role: 'Official system of record for purchasing and accounting',
    },
    icon: 'erp',
  },
  {
    id: 'vendor-cadence',
    label: 'Vendor Cadence',
    subtitle: 'Weekly Vendor Tracking',
    x: -100,
    y: 230,
    owners: ['Sub-Contracts Management'],
    questions: [
      'What line items does critical vendors need to provide?',
      'When does each system need to ship?',
      'How long is is going to take to ship from the vendor to site?',
      'What is the status update from each vendor?',
      'Are we aligned with the vendor on dates?',
      'What are the weekly meeting notes?',
    ],
    details: {
      format: 'Excel workbook with VBA',
      structure: 'Tab per top-level vendor (Intralox, Roach, Flow Turn, Apple Automation, etc.)',
      content: 'All line items per vendor, per finger',
      calculation: 'Required ship date based on install start and vendor distance to site',
      usage: 'Weekly meeting notes and vendor status updates',
      export: 'VBA-generated reports to share with vendors',
      sources: ['Configuration Matrix', 'PM Top Level'],
    },
    icon: 'calendar',
  },
  {
    id: 'vendor-shipping-schedule',
    label: 'Vendor Shipping Schedule',
    subtitle: 'Individual Vendor View',
    x: -400,
    y: 120,
    owners: ['Sub-Contracts Management'],
    questions: [
      'What does Impact Expect the vendor to ship?',
      'When is Impact picking up from the vendor?',
    ],
    details: {
      format: 'Excel report (VBA generated)',
      purpose: 'Individual vendor view to ensure alignment throughout the program',
      audience: 'External - shared with vendors',
    },
    icon: 'doc',
  },
  {
    id: 'internal-high-level-schedule',
    label: 'Internal High Level Schedule',
    subtitle: 'ADTA Team Communication',
    x: -400,
    y: 230,
    owners: ['Project Management'],
    questions: [
      'What date changes have occurred?',
      'What is the current phase for a particular finger? (pre-ship, install, support, complete)',
      'What does the team need to know?',
    ],
    details: {
      format: 'Excel report (VBA generated)',
      purpose: 'Internal communication of date changes',
      updates: 'Ad-hoc for every change, sent by the PM',
      audience: 'Internal - whole ADTA team',
    },
    icon: 'doc',
  },
  {
    id: 'logistics-pickup-schedule',
    label: 'Logistics Pickup Schedule',
    subtitle: 'Truck Scheduling',
    x: -400,
    y: 340,
    owners: ['Project Management', 'Sub-Contracts Management'],
    questions: [
      'What truck pickups need to be scheduled?',
      'When and where are pickups?',
      'What is the ship-to address?',
    ],
    details: {
      format: 'Excel report (VBA generated)',
      content: 'Table with pickup scheduling details',
      fields: ['Pickup date', 'Pickup location', 'Ship-to address'],
      audience: 'Internal - logistics coordination',
    },
    icon: 'doc',
  },
  {
    id: 'bom-cost',
    label: 'BOM Cost',
    subtitle: 'Ship-Level Cost Rollup',
    x: 1100,
    y: 580,
    owners: ['Project Management', 'Procurement'],
    questions: [
      'What is the total cost per ship-level item, including CFE?',
    ],
    details: {
      format: 'Excel workbook',
      sources: ['Configuration Matrix', 'IRP'],
      process: 'Rolls up cost of every ship-level item',
      irpData: ['BOM explosion (drill-down of parts behind assemblies)', 'Calculated avg price per individual item'],
      role: 'Complete cost visibility at ship-level',
    },
    icon: 'cost',
  },
  {
    id: 'material-reconciliation',
    label: 'Material Reconciliation',
    subtitle: 'As-Sold vs As-Built',
    x: 1100,
    y: 720,
    owners: ['Project Management'],
    questions: [
      'What are the BOM differences between as-sold and as-built?',
      'What is the quantity delta per item?',
      'What is the dollar amount of the gap?',
      'What change orders are needed for the customer?',
    ],
    details: {
      format: 'Excel workbook',
      sources: ['Configuration Matrix', 'BOM Cost'],
      comparison: 'As-Sold (Config Matrix) vs As-Built',
      output: 'Quantified deltas (count and $ amount)',
      deltaRange: 'Can be positive or negative',
      usage: 'Generates change orders to end customer',
      role: 'Financial reconciliation of configuration changes',
    },
    icon: 'reconcile',
  },
  {
    id: 'asset-tag-master',
    label: 'Asset Tag Master',
    subtitle: 'Tag Generation & Tracking',
    x: 200,
    y: 720,
    owners: ['Project Management'],
    questions: [
      'What assets need to receive a tag according to AMZL rules?',
      'What specific assets tags are needed per finger?',
      'What tags need to be ordered from the print shop?',
    ],
    details: {
      format: 'Excel workbook',
      source: 'Configuration Matrix',
      content: 'Specific line items per finger requiring asset tags',
      workflow: 'Engineers specify in Config Matrix → Users enhance with manual notes/inputs',
      output: 'Tag orders for printing shop',
      role: 'Asset tagging coordination and procurement',
    },
    icon: 'tag',
  },
  {
    id: 'material-list-generator',
    label: 'Material List Generator',
    subtitle: 'Finger Packing Lists',
    x: -100,
    y: 580,
    owners: ['Project Management', 'Material Management'],
    questions: [
      'What ship-level materials are needed for each finger?',
    ],
    details: {
      format: 'Excel workbook with VBA',
      source: 'Configuration Matrix',
      process: 'Aggregates all ship-level materials per finger',
      output: 'Dedicated material list per finger (VBA generated)',
      usage: 'Shop personnel use lists to pack and stage each finger with appropriate configuration',
      role: 'Shop floor packing and staging coordination',
    },
    icon: 'doc',
  },
  {
    id: 'finger-material-list',
    label: 'Finger Material List',
    subtitle: 'Per-Finger Packing List',
    x: -400,
    y: 580,
    owners: ['Ops'],
    questions: [
      'What materials are needed for this finger?',
      'What are the top-level items?',
      'What electrical/mechanical/documentation is required?',
      'Did everything needed for the finger install arrive at site?',
    ],
    details: {
      format: 'Excel workbook (VBA generated)',
      source: 'Material List Generator',
      structure: 'Tab per discipline: Top Level, Electrical, Mechanical, Documentation',
      content: 'Clean list of all ship-level materials for a specific finger',
      usage: 'Shop personnel packing and staging reference',
    },
    icon: 'doc',
  },
  {
    id: 'work-orders-pick-list',
    label: 'Work Orders & Pick List',
    subtitle: 'Assembly Release',
    x: 1100,
    y: 860,
    owners: ['Ops'],
    questions: [
      'How many assemblies are expected to be complete for this work order?',
      'What parts need to be picked for this work order?',
    ],
    details: {
      format: 'Excel workbook',
      sources: ['Configuration Matrix', 'IRP'],
      process: 'Combines ship-level item counts with IRP BOM explosion for picking',
      output: 'Work orders with associated pick lists',
      usage: 'Release work orders and coordinate parts picking',
      role: 'Production planning and shop floor coordination',
    },
    icon: 'tracker',
  },
];

// Export nodes with computed color from owners
export const nodes = nodeData.map(node => ({
  ...node,
  color: getNodeFill(node.owners),
  primaryColor: getPrimaryColor(node.owners),
}));

// Export owner colors for use in legend
export { ownerColors } from './ownerConfig';
